<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Hospital Patient Management System</title>
    <<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="container">

        <h2>ğŸ¥ Hospital Patient Management System</h2>
        <p style="text-align:center;">Live Demo using GitHub Pages</p>

        <!-- Add Patient -->
        <div class="section">
            <h3>â• Add Patient</h3>
            <input id="id" placeholder="Patient ID">
            <input id="name" placeholder="Name">
            <input id="age" placeholder="Age">
            <button onclick="addPatient()">Add</button>
        </div>

        <!-- Search Patient -->
        <div class="section">
            <h3>ğŸ” Search Patient</h3>
            <input id="searchId" placeholder="Patient ID">
            <button onclick="searchPatient()">Search</button>
            <p id="searchResult"></p>
        </div>

        <!-- Display Patients -->
        <div class="section">
            <h3>ğŸ“‹ All Patients</h3>
            <button onclick="loadPatients()">Display All</button>
            <table id="table">
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Age</th>
                </tr>
            </table>
        </div>

        <!-- Delete Patient -->
        <div class="section">
            <h3>ğŸ—‘ï¸ Delete Patient</h3>
            <input id="deleteId" placeholder="Patient ID">
            <button onclick="deletePatient()">Delete</button>
        </div>

        <!-- Count -->
        <div class="section">
            <h3>ğŸ“Š Total Patients</h3>
            <button onclick="countPatients()">Count</button>
            <p id="count"></p>
        </div>

    </div>

    <script>
        // Backend API (public)
        const api = "https://hospital-backend-9ijl.onrender.com";

        function addPatient() {
            fetch(api + "/add", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    id: id.value,
                    name: name.value,
                    age: age.value
                })
            })
            .then(r => r.json())
            .then(d => alert(d.message));
        }

        function loadPatients() {
            fetch(api + "/patients")
            .then(r => r.json())
            .then(data => {
                table.innerHTML =
                    "<tr><th>ID</th><th>Name</th><th>Age</th></tr>";
                data.forEach(p => {
                    table.innerHTML +=
                        `<tr><td>${p.id}</td><td>${p.name}</td><td>${p.age}</td></tr>`;
                });
            });
        }

        function searchPatient() {
            fetch(api + "/search/" + searchId.value)
            .then(r => r.json())
            .then(d => {
                searchResult.innerText = d.message ?
                    d.message :
                    `ID: ${d.id}, Name: ${d.name}, Age: ${d.age}`;
            });
        }

        function deletePatient() {
            fetch(api + "/delete/" + deleteId.value, { method: "DELETE" })
            .then(r => r.json())
            .then(d => alert(d.message));
        }

        function countPatients() {
            fetch(api + "/count")
            .then(r => r.json())
            .then(d => count.innerText = "Total Patients: " + d.total);
        }
    </script>

</body>
</html>

